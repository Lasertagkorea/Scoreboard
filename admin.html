<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê´€ë¦¬ì | íŒ€ ì ìˆ˜ ê´€ë¦¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background:#020617;
      color:#e5e7eb;
      padding:20px;
    }
    h1 { text-align:center; }
    .wrap { max-width:600px; margin:0 auto; }
    input, button, textarea {
      width:100%;
      padding:14px;
      margin-top:10px;
      border-radius:10px;
      border:none;
      font-size:16px;
    }
    input, textarea {
      background:#0f172a;
      color:#fff;
    }
    button {
      background:#22c55e;
      font-weight:bold;
      cursor:pointer;
    }
    button:hover { background:#16a34a; }
    .btn-gray {
      background:#334155;
    }
    .btn-gray:hover {
      background:#475569;
    }
    .hint {
      margin-top:15px;
      font-size:13px;
      color:#94a3b8;
      line-height:1.6;
    }
  </style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ“ íŒ€ ì ìˆ˜ ê´€ë¦¬ì</h1>

  <button class="btn-gray" onclick="loadFromGithub()">
    ğŸ”„ í˜„ì¬ ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
  </button>

  <input id="team" placeholder="íŒ€ëª… (ì˜ˆ: ë ˆë“œíŒ€)" />
  <input id="score" type="number" placeholder="ì¢…í•© ì ìˆ˜" />

  <button onclick="addOrUpdate()">íŒ€ ì¶”ê°€ / ì ìˆ˜ ìˆ˜ì •</button>

  <textarea id="output" rows="12"
    placeholder="ìµœì¢… JSONì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤"></textarea>

  <div class="hint">
    âœ” ì ìˆ˜ ìˆ˜ì • í›„ ì•„ë˜ JSON ì „ì²´ ë³µì‚¬<br>
    âœ” GitHub â†’ <b>data/scores.json</b>ì— ë¶™ì—¬ë„£ê¸°<br>
    âœ” Commit í•˜ë©´ ì „ê´‘íŒ ìë™ ë°˜ì˜
  </div>
</div>

<script>
const DATA_URL =
  "https://raw.githubusercontent.com/ì•„ì´ë””/ì €ì¥ì†Œëª…/main/data/scores.json";

let teams = [];

// 1ï¸âƒ£ GitHubì— ìˆëŠ” í˜„ì¬ ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
async function loadFromGithub() {
  try {
    const res = await fetch(DATA_URL + "?t=" + Date.now());
    teams = await res.json();
    renderJSON();
    alert("í˜„ì¬ ì ìˆ˜ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤");
  } catch {
    alert("ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
  }
}

// 2ï¸âƒ£ íŒ€ ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •
function addOrUpdate() {
  const team = document.getElementById("team").value.trim();
  const score = Number(document.getElementById("score").value);

  if (!team || isNaN(score)) {
    alert("íŒ€ëª…ê³¼ ì ìˆ˜ë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”");
    return;
  }

  const existing = teams.find(t => t.team === team);
  if (existing) {
    existing.score = score;
  } else {
    teams.push({ team, score });
  }

  document.getElementById("team").value = "";
  document.getElementById("score").value = "";
  renderJSON();
}

// 3ï¸âƒ£ JSON ì¶œë ¥
function renderJSON() {
  document.getElementById("output").value =
    JSON.stringify(teams, null, 2);
}
</script>
</body>
</html>
